{% extends "ba_office/base_office.html" %}
{% load static %}

{% block left_menu %}
{% include "ba_office/includes/lfmember_left.html" %}
{% endblock %}

{% block extra_js %}
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script>
function fn_zipcode() {
    new daum.Postcode({
        oncomplete: function(data) {
            document.regform.zipcode.value = data.zonecode;
            document.regform.address1.value = data.address;
            document.regform.address2.focus();
        }
    }).open();
}

function member_modify() {
    var f = document.regform;
    if (!f.mhtel1.value || !f.mhtel2.value || !f.mhtel3.value) { alert('휴대전화를 입력해주세요.'); return; }
    if (f.pwd_chk && f.pwd_chk.checked) {
        if (!f.member_pwd.value || f.member_pwd.value.length < 8) { alert('비밀번호는 8자 이상 입력해주세요.'); f.member_pwd.focus(); return; }
        if (f.member_pwd.value != f.member_pwd_con.value) { alert('비밀번호가 일치하지 않습니다.'); f.member_pwd_con.focus(); return; }
    }
    f.submit();
}
</script>
{% endblock %}

{% block content %}
<div class="navi">HOME  &gt;  회원관리  &gt;  회원정보</div>
<div class="h_55"></div>

<p class="title">회원정보-수정</p>

{% if error %}
<div style="color:red; margin-bottom:10px; font-weight:bold; padding-left:10px;">{{ error }}</div>
{% endif %}

<div class="tb_basic">
<form name="regform" method="post" action="{% url 'office_member_modify' member.username %}">
{% csrf_token %}
<table summary="ems" border="0" cellpadding="0" cellspacing="0">
    <colgroup><col width="15%" /><col width="85%" /></colgroup>
    <tbody>
        <tr><th scope="col">이름</th><td class="left"><strong>{{ member.name }}</strong></td></tr>
        <tr><th scope="col">아이디</th><td class="left"><strong>{{ member.username }}</strong></td></tr>
        <tr><th scope="col">비밀번호</th><td class="left">
            <input type="checkbox" name="pwd_chk" id="pwd_chk" /> <label for="pwd_chk">비밀번호 변경</label>&nbsp;
            <input type="password" name="member_pwd" size="16" maxlength="16" /> (8자 이상)
        </td></tr>
        <tr><th scope="col">비밀번호 확인</th><td class="left"><input type="password" name="member_pwd_con" size="16" maxlength="16" /></td></tr>
        <tr><th scope="col">전화번호</th><td class="left">
            <input type="text" name="mtel1" value="{{ mtel1 }}" size="3" maxlength="4" /> -
            <input type="text" name="mtel2" value="{{ mtel2 }}" size="4" maxlength="4" /> -
            <input type="text" name="mtel3" value="{{ mtel3 }}" size="4" maxlength="4" />
        </td></tr>
        <tr><th scope="col">휴대전화 *</th><td class="left">
            <select name="mhtel1" class="select">
                <option value="010" {% if mhtel1 == '010' %}selected{% endif %}>010</option>
                <option value="011" {% if mhtel1 == '011' %}selected{% endif %}>011</option>
                <option value="016" {% if mhtel1 == '016' %}selected{% endif %}>016</option>
                <option value="017" {% if mhtel1 == '017' %}selected{% endif %}>017</option>
                <option value="018" {% if mhtel1 == '018' %}selected{% endif %}>018</option>
                <option value="019" {% if mhtel1 == '019' %}selected{% endif %}>019</option>
            </select> -
            <input type="text" name="mhtel2" value="{{ mhtel2 }}" size="4" maxlength="4" /> -
            <input type="text" name="mhtel3" value="{{ mhtel3 }}" size="4" maxlength="4" />
        </td></tr>
        <tr><th scope="col">이메일</th><td class="left"><input type="text" name="member_mail" value="{{ member.email }}" size="40" maxlength="128" /></td></tr>
        <tr><th scope="col">주소</th><td class="left">
            <input type="text" name="zipcode" value="{{ member.zipcode }}" size="7" maxlength="7" readonly /> <a href="javascript:fn_zipcode();"><img src="{% static 'ba_office/images/btn_zip.gif' %}" alt="주소검색" /></a><br />
            <input type="text" name="address1" value="{{ member.address1 }}" size="50" readonly /><br />
            <input type="text" name="address2" value="{{ member.address2 }}" size="50" maxlength="50" />
        </td></tr>
        <tr><th scope="col">SMS 수신</th><td class="left">
            <input type="radio" name="smsyn" value="Y" {% if member.sms_consent == 'Y' %}checked{% endif %} /> 동의
            <input type="radio" name="smsyn" value="N" {% if member.sms_consent == 'N' %}checked{% endif %} /> 거부
        </td></tr>
        <tr><th scope="col">메일 수신</th><td class="left">
            <input type="radio" name="mailyn" value="Y" {% if member.mail_consent == 'Y' %}checked{% endif %} /> 동의
            <input type="radio" name="mailyn" value="N" {% if member.mail_consent == 'N' %}checked{% endif %} /> 거부
        </td></tr>
        <tr><th scope="col">상태</th><td class="left">
            <select name="member_status" class="select">
                <option value="N" {% if member.status == 'N' %}selected{% endif %}>정상</option>
                <option value="S" {% if member.status == 'S' %}selected{% endif %}>중지</option>
                <option value="O" {% if member.status == 'O' %}selected{% endif %}>탈퇴</option>
            </select>
        </td></tr>
    </tbody>
</table>
</form>
</div>
<div class="btn_right">
    <a href="javascript:member_modify();"><img src="{% static 'ba_office/images/btn_modify.gif' %}" alt="수정" /></a>
    <a href="{% url 'office_member_list' %}"><img src="{% static 'ba_office/images/btn_cancel.gif' %}" alt="취소" /></a>
</div>
{% endblock %}
