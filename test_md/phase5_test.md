# Phase 5: 쇼핑몰 테스트 체크리스트

## 서버 실행
```
python manage.py runserver
```

---

## 1. Django Admin 확인

- [ ] http://127.0.0.1:8000/admin/ 접속 (admin / admin1234)
- [ ] **상품 카테고리 (Category)**: 16건 확인
- [ ] **상품 (Product)**: 112건 확인 (활성 35건)
- [ ] **상품옵션 (ProductOption)**: 93건 확인
- [ ] **주문 (Order)**: 12,252건 확인 (결제완료 8,998건)
- [ ] **주문상품 (OrderItem)**: 16,312건 확인
- [ ] **배송정보 (OrderDelivery)**: 16,312건 확인
- [ ] **쇼핑몰KCP결제 (ShopPaymentKCP)**: 8,218건 확인
- [ ] Product 상세에서 ProductOption Inline 표시 확인
- [ ] Order 상세에서 OrderItem, OrderDelivery Inline 표시 확인

---

## 2. 상품 목록 페이지

- [ ] http://127.0.0.1:8000/shop/goods/ 접속
- [ ] 카테고리 탭 표시 (전체, 유니폼, MUST 득템!, 스포츠웨어, 기타, 여름 Hot Sale 등)
- [ ] 상품 이미지 + 상품명 + 가격 그리드 표시
- [ ] 품절 상품에 soldout 아이콘 표시
- [ ] 시장가 → 판매가 형태의 할인 표시
- [ ] 카테고리 탭 클릭 시 필터링 동작
  - 전체: 35건
  - 유니폼: 8건
  - MUST 득템!: 7건
- [ ] 상품 클릭 시 상세 페이지 이동

---

## 3. 상품 상세 페이지

- [ ] http://127.0.0.1:8000/shop/goods/113/ 접속 (AAFC 신가드)
  - 상품 이미지 표시
  - 카테고리, 판매가격, 배송비 표시
  - 옵션 드롭다운 표시 (신가드: 어린이(S), 어린이(M))
  - 수량 입력 필드
  - 장바구니 / 바로구매 / 목록보기 버튼
- [ ] 옵션 미선택 시 경고 메시지
- [ ] 상품설명(HTML) 표시
- [ ] 반품/교환/배송정보 표시

---

## 4. 장바구니

> 로그인 필요 (테스트 계정으로 로그인 후 진행)

- [ ] 상품 상세에서 옵션 선택 → 장바구니 버튼 클릭
- [ ] http://127.0.0.1:8000/shop/cart/ 이동 확인
- [ ] 장바구니 항목 표시 (상품명, 옵션, 수량, 가격)
- [ ] 삭제 버튼 클릭 시 항목 삭제
- [ ] 총 상품금액 + 배송비 = 합계 표시
- [ ] 전체 주문 / 선택 주문 버튼 동작

---

## 5. 주문서 작성

- [ ] 장바구니에서 전체 주문 또는 선택 주문 클릭
- [ ] http://127.0.0.1:8000/shop/order/ 이동 확인
- [ ] 주문 상품 목록 표시 (상품명, 가격, 수량, 배송비, 합계)
- [ ] 결제금액 확인 (상품금액 + 배송비 = 결제금액)
- [ ] 주문자 정보 자동 채움 (로그인 회원 정보)
- [ ] 자녀 선택 드롭다운 (자녀 등록된 경우)
- [ ] 배송정보 - "주문자 동일" 체크 시 정보 복사
- [ ] 결제방법 라디오 (신용카드 / 계좌이체 / 제로페이)
- [ ] 수령인 이름/연락처/주소 미입력 시 경고
- [ ] 결제하기 버튼 → 주문 생성 + 완료 메시지

---

## 6. 주문/배송 조회

- [ ] http://127.0.0.1:8000/shop/orders/ 접속
- [ ] 조회기간 검색 (날짜 입력 후 검색)
- [ ] 주문 목록 테이블 (주문일시, 주문번호/상품, 금액, 상태)
- [ ] 주문 클릭 시 상세 페이지 이동
- [ ] 주문 상세: 상품 목록, 배송정보, 결제정보, 배송정보 표시
- [ ] 페이지네이션 동작 (10건 단위)

---

## 7. 네비게이션 메뉴

- [ ] 상단 GNB 메뉴 "쇼핑몰" 클릭 → 상품리스트 이동
- [ ] 하위 메뉴: 상품리스트 / 장바구니 / 주문배송조회
- [ ] 모바일 메뉴에서도 쇼핑몰 링크 동작
- [ ] 우측 QUICK MENU "쇼핑몰" 클릭 → 상품리스트 이동

---

## 8. 바로구매 플로우

- [ ] 상품 상세에서 옵션 선택 → 바로구매 클릭
- [ ] 장바구니 거치지 않고 바로 주문서 페이지 이동
- [ ] 주문서에서 결제 진행 가능

---

## 이관 데이터 건수 비교

| 테이블 | MSSQL | PostgreSQL | 비고 |
|--------|-------|------------|------|
| Category | 16 | 16 | 일치 |
| Product | 112 | 112 | 일치 |
| ProductOption | 93 | 93 | 일치 |
| ProductOptionItem | 210 | 208 | 2건 스킵 (부모 없음) |
| ProductOptionStock | 210 | 208 | 2건 스킵 (부모 없음) |
| Order | 12,252 | 12,252 | 일치 |
| OrderItem | 16,407 | 16,312 | 95건 스킵 (주문 없음) |
| OrderItemOption | 8,163 | 8,083 | 80건 스킵 (주문상품 없음) |
| OrderDelivery | 16,312 | 16,312 | 일치 |
| ShopPaymentKCP | 8,218 | 8,218 | 일치 |

---

## 생성/수정 파일 목록

| 파일 | 작업 |
|------|------|
| `apps/shop/models.py` | 12개 모델 |
| `apps/shop/admin.py` | Admin 설정 |
| `apps/shop/views.py` | 12개 뷰 함수 |
| `apps/shop/urls.py` | URL 패턴 (신규) |
| `config/urls.py` | shop URL include 추가 |
| `scripts/migrate_shop.py` | 데이터 이관 스크립트 (신규) |
| `templates/shop/goods_list.html` | 상품 목록 |
| `templates/shop/goods_view.html` | 상품 상세 |
| `templates/shop/cart.html` | 장바구니 |
| `templates/shop/order_form.html` | 주문서 |
| `templates/shop/order_success.html` | 결제 성공 |
| `templates/shop/order_fail.html` | 결제 실패 |
| `templates/shop/order_list.html` | 주문 목록 |
| `templates/shop/order_detail.html` | 주문 상세 |
| `templates/base.html` | 쇼핑몰 메뉴 링크 연결 |

---

## 참고: KCP 결제 연동

현재 주문 생성은 동작하지만 실제 KCP 결제 호출은 테스트 모드입니다.
주문 생성 시 `alert`으로 주문번호/결제금액을 보여준 후 주문조회 페이지로 이동합니다.
운영 환경 배포 시 `order_form.html`의 `orderChk()` 함수에서 KCP PG 모듈을 호출하도록 변경 필요합니다.
